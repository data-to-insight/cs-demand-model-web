(self.webpackChunkcsdmpy_skunkworks=self.webpackChunkcsdmpy_skunkworks||[]).push([[437],{9271:function(n,e,t){var r={"./":[7281],"./index":[7281],"./index.js":[7281],"./pyodide":[2314,314],"./pyodide.js":[2314,314],"./static":[8302,302],"./static.js":[8302,302],"./web":[8867,867],"./web.js":[8867,867]};function i(n){if(!t.o(r,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[n],i=e[0];return Promise.all(e.slice(1).map(t.e)).then((function(){return t(i)}))}i.keys=function(){return Object.keys(r)},i.id=9271,n.exports=i},4338:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Fn}});var r,i,a,o,c,s=t(2791),u=t(9434),d=t(1979),l=t(7012),p=t(8966),f=t(2718),h=t(9829),x=t(3003),v=(0,h.oM)({name:"api",initialState:{state:x.Px.IDLE},reducers:{setApiState:function(n,e){n.state=e.payload}}}),j=function(n){return n.api.state},m=v.actions.setApiState,y=v.reducer,g=(0,h.oM)({name:"model",initialState:{model:{}},reducers:{setCurrentState:function(n,e){n.model=e.payload},updateStateProperty:function(n,e){n.model[e.payload.property]=e.payload.value}}}),w=function(n){return function(e){return e.model.model[n]}},Z=function(n){return n.model.model},P=g.actions,b=P.setCurrentState,k=P.updateStateProperty,R=g.reducer,D=(0,h.oM)({name:"view",initialState:{currentView:null},reducers:{setCurrentView:function(n,e){n.currentView=e.payload}}}),E=function(n){return n.view.currentView},O=D.actions.setCurrentView,M=D.reducer,_=(0,h.oM)({name:"view",initialState:{errors:{}},reducers:{setErrors:function(n,e){n.errors=e.payload}}}),A=function(n){return function(e){return e.error.errors[n]}},C=_.actions.setErrors,Y=_.reducer,I=(0,h.xC)({reducer:{api:y,view:M,model:R,error:Y}}),S=t(1413),F=t(4554),L=t(184),V=function(n){return(0,L.jsx)(F.Z,{flexGrow:1,children:n.components&&n.components.map((function(n){return(0,L.jsx)(f.gO,{spacing:"blockLarge",children:(0,L.jsx)(Cn,{viewData:n})},n.id)}))})},N=function(n){var e=n.buttons,t=e.length>1?f.Oh:s.Fragment;return(0,L.jsx)(t,{children:e&&e.map((function(n){return(0,L.jsx)(Cn,{viewData:n},n.id)}))})},U=t(9875),G=t(6151),W=t(5671),T=t(3144),q=t(4165),z=t(5861),B=t(4245),J=["numpy","pandas"],H=["cs-demand-model[pyodide]"],K=I.dispatch,Q=function(){var n=(0,z.Z)((0,q.Z)().mark((function n(e){var t,r;return(0,q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=B.parse(window.location.search),r={options:{appName:"cs_demand_model.rpc:app"}},t.url?(r.transport=x.jG.WEB,r.options.url=t.url):(r.transport=x.jG.PYODIDE,r.options.nativePackages=J,r.options.packages=t.packages?t.packages:H),n.next=5,(0,x.LC)(r,e);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),X=function(n){n!==x.Px.READY&&I.dispatch(m(n))},$=function(n){K(O(n.view)),K(C(n.errors||{})),K(b(n.state))},nn=function(){function n(){var e=this;(0,W.Z)(this,n),this.api=void 0,this.init=function(){if(!e.api)throw K(m(x.Px.ERROR)),new Error("API is not in READY state");e.api.call("action",{action:"init"}).then($).catch((function(n){K(m(x.Px.ERROR))}))},Q(X).then((function(n){e.api=n,K(m(x.Px.READY))})).catch((function(n){K(m(x.Px.ERROR))}))}return(0,T.Z)(n,[{key:"call",value:function(n,e){if(!this.api)throw K(m(x.Px.ERROR)),new Error("API is not in READY state");this.api.call("action",{action:n,data:e}).then($).catch((function(n){K(O({id:"error",type:"error",text:n.message}))}))}}]),n}(),en=new nn,tn=function(){return en},rn=function(n){var e=n.text,t=n.variant,r=n.action,i=n.disabled,a=(0,u.v9)(Z),o=tn(),c=n.start_icon?(0,L.jsx)(U.Z,{children:n.start_icon}):void 0,s=n.end_icon?(0,L.jsx)(U.Z,{children:n.end_icon}):void 0;return(0,L.jsx)(G.Z,{variant:t||"contained",onClick:function(){o.call(r,a)},disabled:i,startIcon:c,endIcon:s,children:e})},an=t(1889),on={height:"80vh",overflowY:"auto"},cn=function(n){return(0,L.jsx)(F.Z,{flexGrow:1,children:(0,L.jsxs)(an.ZP,{container:!0,children:[(0,L.jsx)(an.ZP,{xs:5,item:!0,style:on,children:n.sidebar&&n.sidebar.map((function(n){return(0,L.jsx)(f.gO,{spacing:"blockLarge",children:(0,L.jsx)(Cn,{viewData:n})},n.id)}))}),(0,L.jsx)(an.ZP,{item:!0,xs:7,style:on,children:n.main&&n.main.map((function(n){return(0,L.jsx)(f.gO,{spacing:"blockLarge",children:(0,L.jsx)(Cn,{viewData:n})},n.id)}))})]})})},sn=t(890),un=function(n){var e=n.strong?function(n){return(0,L.jsx)("strong",{children:n.children})}:s.Fragment;return(0,L.jsx)(sn.Z,{children:(0,L.jsx)(e,{children:n.text})})},dn=t(8286),ln=function(n){var e=JSON.parse(n.chart),t=e.data,r=e.layout;return(0,L.jsx)(dn.Z,{data:t,layout:r})},pn=t(168),fn=t(225),hn=(fn.Z.pre(r||(r=(0,pn.Z)(["\n  white-space: normal;\n  word-wrap: break-word;\n"]))),fn.Z.div(i||(i=(0,pn.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n"]))),fn.Z.div(a||(a=(0,pn.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: start;\n"]))),fn.Z.div(o||(o=(0,pn.Z)(["\n  margin-right: ",";\n"])),f.W0.m),fn.Z.div(c||(c=(0,pn.Z)(["\n  margin: 0 ",";\n"])),f.W0.s)),xn=function(n){return(0,L.jsx)(hn,{children:(0,L.jsx)(f.qC,{title:n.title,id:n.id,children:(0,L.jsx)(An,{wrapper:f.gO,children:n.components})})})},vn=function(n){var e=n.padded?f.gO:void 0;return(0,L.jsx)(An,{wrap:e,children:n.components})},jn=t(9439),mn=t(2426),yn=t.n(mn),gn=function(n){return yn()("".concat(n.day," ").concat(n.month," ").concat(n.year),"D MMM YYYY").format("YYYY-MM-DD")},wn=function(n){var e=(0,u.I0)(),t=(0,u.v9)(w(n.id)),r=(0,u.v9)(A(n.id)),i=t?function(n){var e=n.split("-"),t=(0,jn.Z)(e,3),r=t[0],i=t[1],a=t[2];return{year:r,month:yn()(i,"MM").format("MMMM"),day:"".concat(parseInt(a))}}(t):{day:"",month:"",year:""};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(sn.Z,{variant:"subtitle2",children:n.title}),r&&(0,L.jsx)(f.gO,{children:(0,L.jsx)(p.Z,{severity:"error",children:r})}),(0,L.jsx)(f.jo,{day:i.day,month:i.month,year:i.year,onChange:function(t){e(k({property:n.id,value:gn(t)}))}})]})},Zn=t(3466),Pn=t(9981),bn=function(n){var e=(0,u.I0)(),t=(0,u.v9)(w(n.id)),r=(0,u.v9)(A(n.id)),i={};return n.start_icon&&(i.startAdornment=(0,L.jsx)(Zn.Z,{position:"start",children:(0,L.jsx)(U.Z,{children:n.start_icon})})),n.end_icon&&(i.endAdornment=(0,L.jsx)(Zn.Z,{position:"end",children:(0,L.jsx)(U.Z,{children:n.end_icon})})),console.log("StartIcon",i),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(sn.Z,{variant:"subtitle2",children:n.title}),r&&(0,L.jsx)(f.gO,{children:(0,L.jsx)(p.Z,{severity:"error",children:r})}),(0,L.jsx)(Pn.Z,{value:t||"",InputProps:i,inputProps:n.input_props,onChange:function(t){var r=t.target.value;e(k({property:n.id,value:r}))}})]})},kn=function(n){var e=tn(),t=(0,u.v9)(w("files"));return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(f.gq,{label:n.title,onUploadReady:function(t){console.log("onUploadReady",t),e.call(n.action,t)},fileList:t})})},Rn=function(n){var e=n.text?n.text:"An error occurred.";return(0,L.jsx)(p.Z,{severity:"error",children:e})},Dn=t(8323),En=t(7865),On=function(n){var e=(0,u.I0)(),t=(0,u.v9)(w(n.id)),r=(0,u.v9)(A(n.id)),i=(0,u.v9)(Z),a=tn();return console.log("VALUE",t),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(sn.Z,{variant:"subtitle2",children:n.title}),r&&(0,L.jsx)(f.gO,{children:(0,L.jsx)(p.Z,{severity:"error",children:r})}),(0,L.jsx)(Dn.Z,{onChange:function(t){var r=t.target.value;if(e(k({property:n.id,value:r})),n.auto_action){var o=(0,S.Z)({},i);o[n.id]=r,a.call(n.auto_action,o)}},value:t||n.options[0],children:n.options&&n.options.map((function(n){var e=n.label,t=n.value;return(0,L.jsx)(En.Z,{value:t,children:e},t)}))})]})},Mn={boxpage:V,sidebarpage:cn,paragraph:un,buttonbar:N,button:rn,chart:ln,expando:xn,fragment:vn,dateselect:wn,select:On,textfield:bn,fileupload:kn,error:Rn},_n=function(n){var e=n.viewData;if(Mn[e.type]){var t=Mn[e.type];return(0,L.jsx)(t,(0,S.Z)({},e),e.id)}return(0,L.jsx)(Rn,{text:"Missing component: ".concat(e.type)})},An=function(n){var e=n.children,t=n.wrap?n.wrap:s.Fragment;return(0,L.jsx)(L.Fragment,{children:e&&e.map((function(n){return(0,L.jsx)(t,{children:(0,L.jsx)(_n,{viewData:n})},n.id)}))})},Cn=_n,Yn=(0,d.Z)(f.rS),In=function(){var n=tn(),e=(0,u.v9)(j),t=(0,u.v9)(E),r=e===x.Px.READY,i=e===x.Px.ERROR;return(0,s.useEffect)((function(){r&&n.init()}),[n,r]),i?(0,L.jsx)(p.Z,{severity:"error",children:"Failed to load the API. Please refresh your page to try again."}):t?(0,L.jsx)(Cn,{viewData:t}):(0,L.jsx)(f.aN,{type:"cover"})},Sn=function(){var n=(0,u.v9)(j);return(0,L.jsx)(f.uT,{title:"CLA Placement Demand Modelling Tool",chip:"API: ".concat(n),children:(0,L.jsx)(In,{})})},Fn=function(){return(0,L.jsx)(u.zt,{store:I,children:(0,L.jsx)(l.Z,{theme:Yn,children:(0,L.jsx)(f.W2,{children:(0,L.jsx)(Sn,{})})})})}}}]);
//# sourceMappingURL=437.7652a313.chunk.js.map