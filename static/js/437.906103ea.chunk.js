(self.webpackChunkcsdmpy_skunkworks=self.webpackChunkcsdmpy_skunkworks||[]).push([[437],{9271:function(n,e,t){var r={"./":[7281],"./index":[7281],"./index.js":[7281],"./pyodide":[2314,314],"./pyodide.js":[2314,314],"./static":[8302,302],"./static.js":[8302,302],"./web":[8867,867],"./web.js":[8867,867]};function i(n){if(!t.o(r,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[n],i=e[0];return Promise.all(e.slice(1).map(t.e)).then((function(){return t(i)}))}i.keys=function(){return Object.keys(r)},i.id=9271,n.exports=i},4338:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Vn}});var r,i,a,o,c,s=t(2791),d=t(9434),u=t(1979),l=t(7012),p=t(8966),f=t(2718),h=t(9829),x=t(3003),v=(0,h.oM)({name:"api",initialState:{state:x.Px.IDLE},reducers:{setApiState:function(n,e){n.state=e.payload}}}),j=function(n){return n.api.state},m=v.actions.setApiState,g=v.reducer,y=(0,h.oM)({name:"model",initialState:{model:{}},reducers:{setCurrentState:function(n,e){n.model=e.payload},updateStateProperty:function(n,e){n.model[e.payload.property]=e.payload.value}}}),w=function(n){return function(e){return e.model.model[n]}},Z=function(n){return n.model.model},P=y.actions,b=P.setCurrentState,k=P.updateStateProperty,R=y.reducer,D=(0,h.oM)({name:"view",initialState:{currentView:null,loading:!1},reducers:{setCurrentView:function(n,e){n.currentView=e.payload,n.loading=!1},setLoading:function(n,e){n.loading=e.payload}}}),E=function(n){return n.view.currentView},O=function(n){return n.view.loading},M=D.actions,_=M.setCurrentView,A=M.setLoading,C=D.reducer,Y=(0,h.oM)({name:"view",initialState:{errors:{}},reducers:{setErrors:function(n,e){n.errors=e.payload}}}),I=function(n){return function(e){return e.error.errors[n]}},S=Y.actions.setErrors,F=Y.reducer,L=(0,h.xC)({reducer:{api:g,view:C,model:R,error:F}}),N=t(1413),V=t(4554),U=t(184),G=function(n){return(0,U.jsx)(V.Z,{flexGrow:1,children:n.components&&n.components.map((function(n){return(0,U.jsx)(f.gO,{spacing:"blockLarge",children:(0,U.jsx)(Sn,{viewData:n})},n.id)}))})},W=function(n){var e=n.buttons,t=e.length>1?f.Oh:s.Fragment;return(0,U.jsx)(t,{children:e&&e.map((function(n){return(0,U.jsx)(Sn,{viewData:n},n.id)}))})},T=t(9875),q=t(6151),z=t(5671),B=t(3144),J=t(4165),H=t(5861),K=t(4245),Q=["numpy","pandas"],X=["cs-demand-model[pyodide]"],$=L.dispatch,nn=function(){var n=(0,H.Z)((0,J.Z)().mark((function n(e){var t,r;return(0,J.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=K.parse(window.location.search),r={options:{appName:"cs_demand_model.rpc:app"}},t.url?(r.transport=x.jG.WEB,r.options.url=t.url):(r.transport=x.jG.PYODIDE,r.options.nativePackages=Q,r.options.packages=t.packages?t.packages:X),n.next=5,(0,x.LC)(r,e);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),en=function(n){n!==x.Px.READY&&L.dispatch(m(n))},tn=function(n){$(_(n.view)),$(S(n.errors||{})),$(b(n.state))},rn=function(){function n(){var e=this;(0,z.Z)(this,n),this.api=void 0,this.init=function(){if(!e.api)throw $(m(x.Px.ERROR)),new Error("API is not in READY state");e.api.call("action",{action:"init"}).then(tn).catch((function(n){$(m(x.Px.ERROR))}))},nn(en).then((function(n){e.api=n,$(m(x.Px.READY))})).catch((function(n){$(m(x.Px.ERROR))}))}return(0,B.Z)(n,[{key:"call",value:function(n,e){if(!this.api)throw $(m(x.Px.ERROR)),new Error("API is not in READY state");$(A(!0)),this.api.call("action",{action:n,data:e}).then(tn).catch((function(n){$(_({id:"error",type:"error",text:n.message}))}))}}]),n}(),an=new rn,on=function(){return an},cn=function(n){var e=n.text,t=n.variant,r=n.action,i=n.disabled,a=(0,d.v9)(Z),o=on(),c=n.start_icon?(0,U.jsx)(T.Z,{children:n.start_icon}):void 0,s=n.end_icon?(0,U.jsx)(T.Z,{children:n.end_icon}):void 0;return(0,U.jsx)(q.Z,{variant:t||"contained",onClick:function(){o.call(r,a)},disabled:i,startIcon:c,endIcon:s,children:e})},sn=t(1889),dn={height:"80vh",overflowY:"auto"},un=function(n){return(0,U.jsx)(V.Z,{flexGrow:1,children:(0,U.jsxs)(sn.ZP,{container:!0,children:[(0,U.jsx)(sn.ZP,{xs:5,item:!0,style:dn,children:n.sidebar&&n.sidebar.map((function(n){return(0,U.jsx)(f.gO,{spacing:"blockLarge",children:(0,U.jsx)(Sn,{viewData:n})},n.id)}))}),(0,U.jsx)(sn.ZP,{item:!0,xs:7,style:dn,children:n.main&&n.main.map((function(n){return(0,U.jsx)(f.gO,{spacing:"blockLarge",children:(0,U.jsx)(Sn,{viewData:n})},n.id)}))})]})})},ln=t(890),pn=function(n){var e=n.strong?function(n){return(0,U.jsx)("strong",{children:n.children})}:s.Fragment;return(0,U.jsx)(ln.Z,{children:(0,U.jsx)(e,{children:n.text})})},fn=t(8286),hn=function(n){var e=JSON.parse(n.chart),t=e.data,r=e.layout;return(0,U.jsx)(fn.Z,{data:t,layout:r})},xn=t(168),vn=t(225),jn=(vn.Z.pre(r||(r=(0,xn.Z)(["\n  white-space: normal;\n  word-wrap: break-word;\n"]))),vn.Z.div(i||(i=(0,xn.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n"]))),vn.Z.div(a||(a=(0,xn.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: start;\n"]))),vn.Z.div(o||(o=(0,xn.Z)(["\n  margin-right: ",";\n"])),f.W0.m),vn.Z.div(c||(c=(0,xn.Z)(["\n  margin: 0 ",";\n"])),f.W0.s)),mn=function(n){return(0,U.jsx)(jn,{children:(0,U.jsx)(f.qC,{title:n.title,id:n.id,children:(0,U.jsx)(In,{wrapper:f.gO,children:n.components})})})},gn=function(n){var e=n.padded?f.gO:void 0;return(0,U.jsx)(In,{wrap:e,children:n.components})},yn=t(9439),wn=t(2426),Zn=t.n(wn),Pn=function(n){return Zn()("".concat(n.day," ").concat(n.month," ").concat(n.year),"D MMM YYYY").format("YYYY-MM-DD")},bn=function(n){var e=(0,d.I0)(),t=(0,d.v9)(w(n.id)),r=(0,d.v9)(I(n.id)),i=t?function(n){var e=n.split("-"),t=(0,yn.Z)(e,3),r=t[0],i=t[1],a=t[2];return{year:r,month:Zn()(i,"MM").format("MMMM"),day:"".concat(parseInt(a))}}(t):{day:"",month:"",year:""};return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ln.Z,{variant:"subtitle2",children:n.title}),r&&(0,U.jsx)(f.gO,{children:(0,U.jsx)(p.Z,{severity:"error",children:r})}),(0,U.jsx)(f.jo,{day:i.day,month:i.month,year:i.year,onChange:function(t){e(k({property:n.id,value:Pn(t)}))}})]})},kn=t(3466),Rn=t(9981),Dn=function(n){var e=(0,d.I0)(),t=(0,d.v9)(w(n.id)),r=(0,d.v9)(I(n.id)),i={};return n.start_icon&&(i.startAdornment=(0,U.jsx)(kn.Z,{position:"start",children:(0,U.jsx)(T.Z,{children:n.start_icon})})),n.end_icon&&(i.endAdornment=(0,U.jsx)(kn.Z,{position:"end",children:(0,U.jsx)(T.Z,{children:n.end_icon})})),console.log("StartIcon",i),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ln.Z,{variant:"subtitle2",children:n.title}),r&&(0,U.jsx)(f.gO,{children:(0,U.jsx)(p.Z,{severity:"error",children:r})}),(0,U.jsx)(Rn.Z,{value:t||"",InputProps:i,inputProps:n.input_props,onChange:function(t){var r=t.target.value;e(k({property:n.id,value:r}))}})]})},En=function(n){var e=on(),t=(0,d.v9)(w("files"));return(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(f.gq,{label:n.title,onUploadReady:function(t){console.log("onUploadReady",t),e.call(n.action,t)},fileList:t})})},On=function(n){var e=n.text?n.text:"An error occurred.";return(0,U.jsx)(p.Z,{severity:"error",children:e})},Mn=t(8323),_n=t(7865),An=function(n){var e=(0,d.I0)(),t=(0,d.v9)(w(n.id)),r=(0,d.v9)(I(n.id)),i=(0,d.v9)(Z),a=on();return console.log("VALUE",t),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ln.Z,{variant:"subtitle2",children:n.title}),r&&(0,U.jsx)(f.gO,{children:(0,U.jsx)(p.Z,{severity:"error",children:r})}),(0,U.jsx)(Mn.Z,{onChange:function(t){var r=t.target.value;if(e(k({property:n.id,value:r})),n.auto_action){var o=(0,N.Z)({},i);o[n.id]=r,a.call(n.auto_action,o)}},value:t||n.options[0],children:n.options&&n.options.map((function(n){var e=n.label,t=n.value;return(0,U.jsx)(_n.Z,{value:t,children:e},t)}))})]})},Cn={boxpage:G,sidebarpage:un,paragraph:pn,buttonbar:W,button:cn,chart:hn,expando:mn,fragment:gn,dateselect:bn,select:An,textfield:Dn,fileupload:En,error:On},Yn=function(n){var e=n.viewData;if(Cn[e.type]){var t=Cn[e.type];return(0,U.jsx)(t,(0,N.Z)({},e),e.id)}return(0,U.jsx)(On,{text:"Missing component: ".concat(e.type)})},In=function(n){var e=n.children,t=n.wrap?n.wrap:s.Fragment;return(0,U.jsx)(U.Fragment,{children:e&&e.map((function(n){return(0,U.jsx)(t,{children:(0,U.jsx)(Yn,{viewData:n})},n.id)}))})},Sn=Yn,Fn=(0,u.Z)(f.rS),Ln=function(){var n=on(),e=(0,d.v9)(j),t=(0,d.v9)(E),r=(0,d.v9)(O),i=e===x.Px.READY,a=e===x.Px.ERROR;return(0,s.useEffect)((function(){i&&n.init()}),[n,i]),a?(0,U.jsx)(p.Z,{severity:"error",children:"Failed to load the API. Please refresh your page to try again."}):t?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Sn,{viewData:t}),r&&(0,U.jsx)(f.aN,{type:"cover"})]}):(0,U.jsx)(f.aN,{type:"cover"})},Nn=function(){var n=(0,d.v9)(j);return(0,U.jsx)(f.uT,{title:"CLA Placement Demand Modelling Tool",chip:"API: ".concat(n),children:(0,U.jsx)(Ln,{})})},Vn=function(){return(0,U.jsx)(d.zt,{store:L,children:(0,U.jsx)(l.Z,{theme:Fn,children:(0,U.jsx)(f.W2,{children:(0,U.jsx)(Nn,{})})})})}}}]);
//# sourceMappingURL=437.906103ea.chunk.js.map